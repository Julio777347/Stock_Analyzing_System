<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Stocking量化交易</title>

    <!-- Bootstrap core CSS -->
    <link href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link href="https://cdn.bootcss.com/flat-ui/2.3.0/css/flat-ui.min.css" rel="stylesheet">
    <style type="text/css">
        #input {
            margin-top: 20px;
        }

        .nav-tabs > li {
            width: 20%;
            background-color: #004fa2;
        }

        a {
            color: #ffffff
        }

        ul {
            text-align: center;
        }

    </style>

    <script type="text/javascript" src="json2-min.js"></script>
</head>
<body style="background: #efeff4" onload="start()">
<div class="container-fluid" style="background: url(lgBg2.jpg);background-size: 100%">
    <div class="navbar-header">
        <img src="stock2.png" class="img-rounded">
    </div>
    <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#" style="height: 100px;line-height: 70px; font-size:4em">Stocking</a>
    </div>
    <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav navbar-right">
            <li><a href="login.html" target="_blank" style="height: 100px;line-height: 70px; font-size:1.2em">登录</a>
            </li>
            <li><a href="#" style="height: 100px;line-height: 70px; font-size:1.2em">注册</a></li>
        </ul>
        <form class="navbar-form navbar-right" action="#" role="search">
            <div class="form-group">
                <div class="input-group" id="input">
                    <input class="form-control" id="navbarInput-01" type="search" placeholder="Search"
                           style="height: 45px;padding: 10px 15px;font-size: 17px;line-height: 1.235; width:300px">
                    <span class="input-group-btn">
                  <button type="submit" class="btn"
                          style="height: 45px;padding: 10px 15px;font-size: 17px;line-height: 1.235"><span
                          class="fui-search "></span></button>
                </span>
                </div>
            </div>
        </form>
    </div>
</div>
<div class="collapse navbar-collapse" id="navbar-collapse-6">
    <ul class="nav nav-tabs">
        <li><a href="index.html"><span class="glyphicon glyphicon-home"></span>&nbsp&nbsp&nbsp首页</a></li>
        <li><a href="singleSearch.html"><span class="glyphicon glyphicon-stats"></span>&nbsp&nbsp&nbsp股票数据</a></li>
        <li><a href="market_1.html"><span class="glyphicon glyphicon-file"></span>&nbsp&nbsp&nbsp行情信息</a></li>
        <li class="active"><a href="regressionSetting.html"><span class="glyphicon glyphicon-tags"></span>&nbsp&nbsp&nbsp回测</a></li>
        <li><a href="news.html"><span class="glyphicon glyphicon-book"></span>&nbsp&nbsp&nbsp新闻</a></li>
    </ul>
</div>


<div class="container">
    <div class="col-md-5" style="background: white;">
        <table class="table table-hover" id="table" border="4">
            <!--<caption>周期股票排名</caption>-->
            <thead>
            <tr>
                <th>相对强弱计算周期</th>
                <th>超额收益</th>
                <th>一年内收益</th>
            </tr>
            </thead>
            <tbody>
            <!--<tr>-->
            <!--<td>1</td>-->
            <!--<td>a</td>-->
            <!--<td>0001</td>-->
            <!--</tr>-->

            </tbody>
        </table>
    </div>
    <!--<div style="width:32%;background: white;margin-top: 2%;margin-left: 5%" class="resultTable">-->
       <!---->


    <!--</div>-->
    <div class="col-md-7" style="background: white">
        <div id="superVar" style=";width:100%"></div>
        <div id="winRate" style=";width:100%"></div>
    </div>
    <!--<div style="background: white;width:60%;margin-left: 41%;" class="superVar">-->
        <!---->
    <!--</div>-->

    <!--<div style="background: white;width:60%;margin-left: 41%" class="winRate">-->
        <!---->
    <!--</div>-->
</div>

<script type="text/javascript" src="echarts.js"></script>
<!--<script type="text/javascript" src="echarts.simple.min.js"></script>-->
<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/bmap.min.js"></script>
<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-stat/ecStat.min.js"></script>
<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/dataTool.min.js"></script>
<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/china.js"></script>
<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/world.js"></script>
<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM"></script>
<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/bmap.min.js"></script>
<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts-all-3.js"></script>
<script type="text/javascript">
    var overProfit;
    var winChance;
    function start() {
        var url = "http://localhost:8080/bgraph";
        var message;
        if (typeof(Storage) !== "undefined") {
            message = decodeURIComponent(sessionStorage["message"]);
        }
        alert(JSON.stringify(message));
        $.ajax({
            type: "POST",
            url: url,
            data: message,
            dataType: "json",//此处要设置成json
            success: function (data) {
                alert(data);
                alert(JSON.stringify(data));
                alert(data[0]);
                alert(JSON.stringify(data[0]));
                overProfit = data[0].overProfit;
                winChance = data[0].winChance;


                addTableCell();
                superVarChart();
                winChanceChart();
            }
        })
    }

    function addTableCell(){
        for(var i = 0;i<overProfit.length;i++){
            var newTr = table.insertRow();
            var newTd0 = newTr.insertCell();
            var newTd1 = newTr.insertCell();
            var newTd2 = newTr.insertCell();

            newTd0.innerHTML = i+1;
            newTd1.innerText = parseFloat(overProfit[i].toFixed(2));
            newTd2.innerText = parseFloat(winChance[i].toFixed(2));
        }
    }
    function superVarChart(){
        var dom = document.getElementById("superVar");
        var myChart = echarts.init(dom);
//        var base = +new Date(1968, 9, 3);
//        var oneDay = 24 * 3600 * 1000;
//        var date = [];
//
//        var data = [Math.random() * 300];
//
//        for (var i = 1; i < 20000; i++) {
//            var now = new Date(base += oneDay);
//            date.push([now.getFullYear(), now.getMonth() + 1, now.getDate()].join('/'));
//            data.push(Math.round((Math.random() - 0.5) * 20 + data[i - 1]));
//        }

        option = {
            title: {
                text: '折线图堆叠'
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data:['邮件营销','联盟广告','视频广告','直接访问','搜索引擎']
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            toolbox: {
                feature: {
                    saveAsImage: {}
                }
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: ['周一','周二','周三','周四','周五','周六','周日']
            },
            yAxis: {
                type: 'value'
            },
            series: [
                {
                    name:'邮件营销',
                    type:'line',
                    stack: '总量',
                    data:[120, 132, 101, 134, 90, 230, 210]
                },
                {
                    name:'联盟广告',
                    type:'line',
                    stack: '总量',
                    data:[220, 182, 191, 234, 290, 330, 310]
                },
                {
                    name:'视频广告',
                    type:'line',
                    stack: '总量',
                    data:[150, 232, 201, 154, 190, 330, 410]
                },
                {
                    name:'直接访问',
                    type:'line',
                    stack: '总量',
                    data:[320, 332, 301, 334, 390, 330, 320]
                },
                {
                    name:'搜索引擎',
                    type:'line',
                    stack: '总量',
                    data:[820, 932, 901, 934, 1290, 1330, 1320]
                }
            ]
        };
        myChart.setOption(option);

    }
    function winChanceChart(){
        var dom = document.getElementById("winRate");
        var myChart = echarts.init(dom);
//        var base = +new Date(1968, 9, 3);
//        var oneDay = 24 * 3600 * 1000;
//        var date = [];
//
//        var data = [Math.random() * 300];
//
//        for (var i = 1; i < 20000; i++) {
//            var now = new Date(base += oneDay);
//            date.push([now.getFullYear(), now.getMonth() + 1, now.getDate()].join('/'));
//            data.push(Math.round((Math.random() - 0.5) * 20 + data[i - 1]));
//        }

        option = {
            title: {
                text: '折线图堆叠'
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data:['邮件营销','联盟广告','视频广告','直接访问','搜索引擎']
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            toolbox: {
                feature: {
                    saveAsImage: {}
                }
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: ['周一','周二','周三','周四','周五','周六','周日']
            },
            yAxis: {
                type: 'value'
            },
            series: [
                {
                    name:'邮件营销',
                    type:'line',
                    stack: '总量',
                    data:[120, 132, 101, 134, 90, 230, 210]
                },
                {
                    name:'联盟广告',
                    type:'line',
                    stack: '总量',
                    data:[220, 182, 191, 234, 290, 330, 310]
                },
                {
                    name:'视频广告',
                    type:'line',
                    stack: '总量',
                    data:[150, 232, 201, 154, 190, 330, 410]
                },
                {
                    name:'直接访问',
                    type:'line',
                    stack: '总量',
                    data:[320, 332, 301, 334, 390, 330, 320]
                },
                {
                    name:'搜索引擎',
                    type:'line',
                    stack: '总量',
                    data:[820, 932, 901, 934, 1290, 1330, 1320]
                }
            ]
        };
        myChart.setOption(option);

    }
</script>


</body>
</html>