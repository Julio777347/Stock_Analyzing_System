package stocking.data_impl;

import net.sf.json.JSONObject;
import org.junit.Before;
import org.junit.Test;
import stocking.data_service.DataFactory_Data_Service;
import stocking.data_service.GetNews_Data_Service;
import stocking.po.NewsPO;

import static org.junit.Assert.*;

/**
 * Created by xjwhhh on 2017/6/5.
 */
public class GetNews_Data_ImplTest {
    DataFactory_Data_Service dataFactory_data_service;
    GetNews_Data_Service getNews_data_service;

    @Before
    public void init(){
        dataFactory_data_service=DataFactory_Data_Impl.getInstance();
        getNews_data_service=dataFactory_data_service.getNews();
    }

    @Test
    public void getMarketNews() throws Exception {
        NewsPO newsPO=getNews_data_service.getMarketNews();
        JSONObject json = JSONObject.fromObject(newsPO);//将java对象转换为json对象
        String str = json.toString();//将json对象转换为字符串
        String needStr="{\"classify\":[\"美股\",\"证券\",\"证券\",\"美股\",\"证券\",\"证券\",\"证券\",\"证券\",\"证券\",\"国内财经\",\"美股\",\"证券\",\"证券\",\"美股\",\"证券\",\"国内财经\",\"证券\",\"证券\",\"美股\",\"证券\"],\"time\":[\"06-05 23:23\",\"06-05 23:23\",\"06-05 23:15\",\"06-05 23:07\",\"06-05 23:05\",\"06-05 22:56\",\"06-05 22:52\",\"06-05 22:48\",\"06-05 22:47\",\"06-05 22:40\",\"06-05 22:39\",\"06-05 22:29\",\"06-05 22:25\",\"06-05 22:21\",\"06-05 22:16\",\"06-05 22:13\",\"06-05 22:11\",\"06-05 22:07\",\"06-05 22:07\",\"06-05 22:05\"],\"title\":[\"郭台铭：亚马逊和苹果也有意出资东芝半导体\",\"证券公司怪现象：子公司往往比母公司表现要突出\",\"质押上市公司股票融资58.5亿 九鼎究竟活的怎么样？\",\"6月5日23点交易员正关注要闻\",\"盛希泰：IPO必须市场化常态化 当前最要紧是加速\",\"金融监管释放温和信号：去杠杆要堵更要疏 强化监管并非打…\",\"从闪崩到秒板 A股兜底式增持潮发威\",\"中国神华不愿意为大唐发电擦屁股？\",\"港股倒跌收市 腾讯(00700-HK)首市扬又托沽？\",\"金融监管释放温和信号：要堵更要疏 并非打压市场\",\"Facebook承诺将积极围剿恐怖主义内容\",\"神华国电重组预期升温 国电系集体飙涨\",\"大连友谊实控人出手 新黄浦股权大戏再生变数\",\"新浪7日将派息 今日股价除权7.45美元\",\"ST股今年很悲情：近七成跌逾30% “救赎”现三条路径\",\"思考中国金融：5大诱因导致脱实向虚 首要是修正市场机制\",\"两桶油掀起价格战 开车族盼来大利好\",\"股权质押遭遇股价大跌 逾100家公司告急\",\"亚航将在郑州建设低成本航空产业链\",\"大佬互撕只是佐料 小散急切关注A股风格转换\"],\"url\":[\"http://finance.sina.com.cn/stock/usstock/c/2017-06-05/doc-ifyfuzny3383451.shtml\",\"http://finance.sina.com.cn/stock/hyyj/2017-06-05/doc-ifyfuzny3383411.shtml\",\"http://finance.sina.com.cn/stock/s/2017-06-05/doc-ifyfuzny3382216.shtml\",\"http://finance.sina.com.cn/stock/usstock/c/2017-06-05/doc-ifyfuzmy2052597.shtml\",\"http://finance.sina.com.cn/stock/stocktalk/2017-06-05/doc-ifyfuzmy2052213.shtml\",\"http://finance.sina.com.cn/stock/marketresearch/2017-06-05/doc-ifyfuzmy2050590.shtml\",\"http://finance.sina.com.cn/stock/marketresearch/2017-06-05/doc-ifyfuzny3378559.shtml\",\"http://cj.sina.com.cn/article/detail/2972154552/274105\",\"http://cj.sina.com.cn/article/detail/2972154552/274107\",\"http://finance.sina.com.cn/china/hgjj/2017-06-05/doc-ifyfuzny3376722.shtml\",\"http://finance.sina.com.cn/stock/usstock/c/2017-06-05/doc-ifyfuzmy2048282.shtml\",\"http://finance.sina.com.cn/stock/hyyj/2017-06-05/doc-ifyfuzmy2046767.shtml\",\"http://finance.sina.com.cn/stock/s/2017-06-05/doc-ifyfuzmy2046227.shtml\",\"http://finance.sina.com.cn/stock/usstock/c/2017-06-05/doc-ifyfuzny3373754.shtml\",\"http://finance.sina.com.cn/stock/marketresearch/2017-06-05/doc-ifyfuzny3372648.shtml\",\"http://finance.sina.com.cn/roll/2017-06-05/doc-ifyfuzmy2043656.shtml\",\"http://finance.sina.com.cn/stock/hyyj/2017-06-05/doc-ifyfuzmy2043225.shtml\",\"http://finance.sina.com.cn/stock/marketresearch/2017-06-05/doc-ifyfuzmy2042255.shtml\",\"http://finance.sina.com.cn/stock/usstock/c/2017-06-05/doc-ifyfuzmy2042209.shtml\",\"http://finance.sina.com.cn/stock/marketresearch/2017-06-05/doc-ifyfuzmy2041696.shtml\"]}";
        assertEquals(needStr,str);
    }

    @Test
    public void getSingleNews() throws Exception {
        NewsPO newsPO=getNews_data_service.getSingleNews("000001");
        JSONObject json = JSONObject.fromObject(newsPO);//将java对象转换为json对象
        String str = json.toString();//将json对象转换为字符串
        String needStr="{\"classify\":[\"临时公告\",\"临时公告\",\"临时公告\",\"一季度报告（摘要）\",\"一季度报告\",\"临时公告\",\"临时公告\",\"临时公告\",\"临时公告\",\"券商报告\",\"券商报告\",\"公司章程\",\"临时公告\",\"临时公告\",\"临时公告\",\"临时公告\",\"临时公告\",\"年度报告（摘要）\",\"年度报告\",\"临时公告\",\"临时公告\",\"临时公告\",\"临时公告\",\"临时公告\",\"临时公告\",\"临时公告\",\"临时公告\",\"临时公告\",\"临时公告\",\"临时公告\"],\"time\":[\"2017-05-13\",\"2017-04-22\",\"2017-04-22\",\"2017-04-22\",\"2017-04-22\",\"2017-03-27\",\"2017-03-17\",\"2017-03-17\",\"2017-03-17\",\"2017-03-17\",\"2017-03-17\",\"2017-03-17\",\"2017-03-17\",\"2017-03-17\",\"2017-03-17\",\"2017-03-17\",\"2017-03-17\",\"2017-03-17\",\"2017-03-17\",\"2017-03-17\",\"2017-03-17\",\"2017-03-17\",\"2017-03-17\",\"2017-03-17\",\"2017-03-17\",\"2017-03-17\",\"2017-03-01\",\"2017-02-07\",\"2017-01-26\",\"2017-01-14\"],\"title\":[\"平安银行：关于副行长任职资格核准的公告\",\"平安银行：监事会决议公告\",\"平安银行：董事会决议公告\",\"平安银行：2017年第一季度报告正文\",\"平安银行：2017年第一季度报告全文\",\"平安银行：澄清公告\",\"平安银行：内部控制审计报告\",\"平安银行：监事会决议公告\",\"平安银行：监事会对本行2016年度内部控制自我评价报告的意见\",\"平安银行：国泰君安证券股份有限公司、平安证券股份有限公司关于公司2016年度募集资金存放与实际使用情况的核查意见\",\"平安银行：国泰君安证券股份有限公司、平安证券股份有限公司关于公司2016年度保荐工作报告\",\"平安银行：公司章程（2017年3月）\",\"平安银行：独立董事相关独立意见\",\"平安银行：董事会决议公告\",\"平安银行：2016年投资者保护工作情况报告\",\"平安银行：2016年企业社会责任报告\",\"平安银行：2016年年度审计报告\",\"平安银行：2016年年度报告摘要\",\"平安银行：2016年年度报告\",\"平安银行：2016年度内部控制自我评价报告\",\"平安银行：2016年度募集资金存放与实际使用情况专项报告及鉴证报告\",\"平安银行：2016年度募集资金存放与实际使用情况专项报告\",\"平安银行：2016年度控股股东及其他关联方占用资金情况专项报告\",\"平安银行：2016年度监事会工作报告\",\"平安银行：2016年度独立董事述职报告\",\"平安银行：2016年度董事会工作报告\",\"平安银行：优先股股息发放实施公告\",\"平安银行：关于董事任职资格核准的公告\",\"平安银行：关于董事辞任的公告\",\"平安银行：关于董事辞任的公告\"],\"url\":[\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3403346\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3278011\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3278010\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3278009\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3278008\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3146714\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3116736\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3116735\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3116734\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3116733\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3116732\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3116731\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3116730\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3116729\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3116728\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3116727\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3116726\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3116725\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3116724\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3116723\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3116722\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3116720\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3116718\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3116716\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3116714\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3116711\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3079037\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3036143\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3030841\",\"http://vip.stock.finance.sina.com.cn/corp/view/vCB_AllBulletinDetail.php?CompanyCode=10000590&gather=1&id=3001129\"]}";
        assertEquals(needStr,str);
    }

}